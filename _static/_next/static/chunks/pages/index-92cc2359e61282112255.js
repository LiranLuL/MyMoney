(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2474:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(5861),i=n(7757),s=n.n(i),o=n(5152),a=n(8804),c=(a.ZP.div.withConfig({displayName:"homeStyles__Wrapper",componentId:"sc-d6dpns-0"})(["display:flex;justify-content:center;align-items:center;min-height:100vh;width:100vw;"]),a.ZP.button.withConfig({displayName:"homeStyles__RoundButton",componentId:"sc-d6dpns-1"})(["background-color:#ff8906;width:14vw;height:14vw;border-radius:50%;border:none;position:fixed;bottom:2%;right:1%;box-shadow:0 0 16px 2px #ff8906;cursor:pointer;outline:none;max-width:50px;max-height:50px;"])),u=a.ZP.h1.withConfig({displayName:"homeStyles__Label",componentId:"sc-d6dpns-2"})(["position:absolute;top:45%;left:31%;color:white;"]),l=n(1945),f=n(6077),d=n(3319),h=n(878),p=n(7294),m=n(5893);var g=function(e){var t=e.setSelectedValue,n=e.categories,r=(0,p.useState)([]),i=r[0],s=r[1],o=(0,p.useState)([]),a=o[0],c=o[1];return(0,p.useEffect)((function(){var e=null===n||void 0===n?void 0:n.map((function(e,t){return{name:e.name,id:t}}));s(e)}),[n]),(0,m.jsx)(h.Multiselect,{avoidHighlightFirstOption:!0,disablePreSelectedValues:!0,singleSelect:!0,selectedValues:a,options:i,onSelect:function(e,n){c(e),t(n)},onRemove:function(e,t){c(e)},displayValue:"name"})},x=n(1752),v=function(){return"Bearer "+JSON.parse(localStorage.getItem("user")).token},y=(0,x.default)().publicRuntimeConfig.apiUrl+"/users/categories";function w(){return(w=(0,r.Z)(s().mark((function e(t,n,r){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:v()},body:JSON.stringify({username:t,amount:n,categorie:r})},e.abrupt("return",fetch(y,i).then(S));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return j.apply(this,arguments)}function j(){return(j=(0,r.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Authorization:v()},body:JSON.stringify({username:t})},e.next=3,fetch(y,n).then(S);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){[401,403].includes(e.status)&&userService.userValue&&userService.logout();var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}var A=function(){return JSON.parse(localStorage.getItem("user"))};function N(e){var t=e.isShow,n=e.handleClose,r=e.categories,i=(0,p.useState)(!1),s=i[0],o=i[1],a=(0,p.useState)(),c=a[0],u=a[1],h=(0,p.useRef)(null);return(0,p.useEffect)((function(){o(t)}),[t]),(0,m.jsxs)(f.Z,{show:s,onHide:n,children:[(0,m.jsx)(f.Z.Header,{children:(0,m.jsx)(f.Z.Title,{children:"Expenses"})}),(0,m.jsx)(f.Z.Body,{children:(0,m.jsxs)(d.Z,{children:[(0,m.jsx)(d.Z.Label,{children:"Choose categories"}),(0,m.jsx)(g,{setSelectedValue:u,categories:r}),(0,m.jsxs)(d.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,m.jsx)(d.Z.Label,{children:"How"}),(0,m.jsx)(d.Z.Control,{ref:h,type:"text",placeholder:"Amount"})]})]})}),(0,m.jsxs)(f.Z.Footer,{children:[(0,m.jsx)(l.Z,{variant:"secondary",onClick:n,children:"Close"}),(0,m.jsx)(l.Z,{variant:"primary",style:{backgroundColor:"#ff8906"},onClick:function(){var e=""===h.current.value?-1:Number(h.current.value);c&&e>=0&&(!function(e,t,n){w.apply(this,arguments)}(A().username,e,c.name),u(void 0),n())},children:"Save Changes"})]})]})}var Z=n(5675),P=a.ZP.div.withConfig({displayName:"listStyles__Entry",componentId:"sc-1he7kpl-0"})(["display:flex;justify-content:space-between;align-items:center;min-height:30px;height:5vh;width:90%;border-radius:10px;background-color:white;padding-right:20px;padding-left:10px;margin-bottom:25px;background-color:#0f0e17;box-shadow:0 0px 10px 2px #f25f4c;"]),C=a.ZP.div.withConfig({displayName:"listStyles__Wrapper",componentId:"sc-1he7kpl-1"})(["display:flex;justify-content:start;flex-direction:column;align-items:center;min-height:50vh;"]),_=a.ZP.div.withConfig({displayName:"listStyles__Category",componentId:"sc-1he7kpl-2"})(["display:flex;justify-content:center;align-items:center;color:#fffffe;"]),k=(a.ZP.img.withConfig({displayName:"listStyles__CategoryIcon",componentId:"sc-1he7kpl-3"})(["display:flex;justify-content:center;align-items:center;height:80%;"]),a.ZP.div.withConfig({displayName:"listStyles__Price",componentId:"sc-1he7kpl-4"})(["display:flex;justify-content:center;align-items:center;color:#fffffe;"])),V={src:"/_next/static/image/styles/icons/products.d37ef2e83fbdbf4fbacbffecf1fe4549.png",height:100,width:100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABAElEQVR42mNABl8/vVI7f/HWpAuX73S+ffNaGiz45d1HsQvXrrWeffoq8sSZ25Nn7X38f9n+u/8vnTkWA1bw5u2P4JVrZ/4/s6D0/8NDU35/+Pzux6NXP/5fOX99IljBlVv3+5YurPl/dJX1j1Nn0/+fPNv479CVLX8Wb5r7/+KFK7MZ3r/45N+3bML//Ek2/5r6g/91rmz5VzjL79+kRb3/r128DbFm1a7NtzZ0Mfy/MM3u170XN35tPb76/4oNq67DXX/m/KUZ/XMr/vfOSfvfv6rx/9QVff+PHDkxDa7g8/tPcqfPXZ51+MSZuYePHJt74sSZ2cePHldmYGBgAAC8tJf6OEgwYgAAAABJRU5ErkJggg=="};function E(e){var t=e.entrys;return(0,m.jsx)(C,{children:t.map((function(e){return(0,m.jsxs)(P,{children:[(0,m.jsx)(Z.default,{src:V,alt:"Picture of the author",height:"30px",width:"30px"}),(0,m.jsx)(_,{children:e.name}),(0,m.jsx)(k,{children:Number(e.amount).toLocaleString("ru-RU",{minimumFractionDigits:2})+" \u20bd"})]},e.name)}))})}var I=function(e){switch(e.name){case"Plus":case"Product":return(0,m.jsx)("svg",{width:"24",height:"27",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{d:"M16 9H9V16H7V9H0V7H7V0H9V7H16V9Z",fill:"#1F1F1F"})})}},H=(0,o.default)((function(){return Promise.all([n.e(762),n.e(487),n.e(582)]).then(n.bind(n,1582))}),{ssr:!1,loadableGenerated:{webpack:function(){return[1582]},modules:["index.jsx -> components/pie"]}});var X=function(){var e=(0,p.useState)(!1),t=e[0],n=e[1],i=(0,p.useState)([]),o=i[0],a=i[1],l=(0,p.useState)([]),f=l[0],d=l[1],h=function(e){var t=e.map((function(e){return{id:e.name,label:e.name,value:e.amount}}));a(t)};function g(){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A().username,e.next=3,b(t);case 3:n=e.sent,d(n.categories),h(n.categories.filter((function(e){return e.amount>0})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,p.useEffect)((function(){g(),setInterval(g,5e3)}),[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{style:{height:"50vh"},children:[(0,m.jsx)(N,{handleClose:function(){n(!1)},isShow:t,categories:f}),(0,m.jsx)(H,{data:o}),0===o.length&&(0,m.jsx)(u,{children:"Add something"}),(0,m.jsx)(c,{onClick:function(){n(!0)},children:(0,m.jsx)(I,{name:"Plus"})})]}),(0,m.jsx)(E,{entrys:f.filter((function(e){return e.amount>0}))})]})}},3685:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2474)}])}},function(e){e.O(0,[774,804,943,888,179],(function(){return t=3685,e(e.s=t);var t}));var t=e.O();_N_E=t}]);